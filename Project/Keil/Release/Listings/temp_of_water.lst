C51 COMPILER V9.60.7.0   TEMP_OF_WATER                                                     12/05/2025 17:29:01 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE TEMP_OF_WATER
OBJECT MODULE PLACED IN .\Release\Objects\temp_of_water.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\User\temp_of_water.c LARGE OPTIMIZE(9,SIZE) BROWSE ORDER INTVECTOR
                    -(0X000C) INCDIR(..\..\Libraries\Include;..\..\User;..\..\User\lib;..\..\Hardware) INTERVAL(3) DEBUG OBJECTEXTEND PRINT(.
                    -\Release\Listings\temp_of_water.lst) OBJECT(.\Release\Objects\temp_of_water.obj)

line level    source

   1          // encoding UTF-8
   2          // æ°´æ¸©æ£€æµ‹æºç¨‹åº
   3          #include "temp_of_water.h"
   4          
   5          // å®ç‰©æ˜¯æ£€æµ‹NTCçƒ­æ•ç”µé˜»çš„åˆ†å‹
   6          
   7          #if TEMP_OF_WATER_SCAN_ENABLE
              // æ°´æ¸©æ£€æµ‹å‡½æ•°ï¼Œå¦‚æœæ°´æ¸©è¿‡é«˜ï¼Œä¼šå‘é€æ°´æ¸©æŠ¥è­¦ï¼Œæ°´æ¸©æ¢å¤æ­£å¸¸æ—¶ï¼Œæ‰å‘é€è§£é
             -™¤æ°´æ¸©æŠ¥è­¦
              void temp_of_water_scan(void)
              {
                  static u32 over_heat_accumulate_cnt = 0;    // è¿‡çƒ­ç´¯è®¡è®¡æ•°
                  static u32 cooling_down_accumulate_cnt = 0; // å†·å´ç´¯è®¡è®¡æ•°
                  static u32 temp_of_water_update_time_cnt = 0;
              
                  adc_sel_pin(ADC_PIN_TEMP_OF_WATER);
                  adc_val = adc_getval(); //
                  temp_of_water_update_time_cnt += ONE_CYCLE_TIME_MS;
              
                  // å¦‚æœå¤„äºæ°´æ¸©æŠ¥è­¦
                  if (adc_val <= TEMP_OF_WATER_CANCEL_WARNING_AD_VAL)
                  {
                      // å¦‚æœæ£€æµ‹åˆ°æ°´æ¸© ä½äº è§£é™¤æ°´æ¸©æŠ¥è­¦çš„é˜ˆå€¼
                      cooling_down_accumulate_cnt++;
                      // æ¸…é™¤æ°´æ¸©è¿‡çƒ­è®¡æ•°
                      over_heat_accumulate_cnt = 0;
                  }
                  else
                  {
                      cooling_down_accumulate_cnt = 0;
                  }
              
                  if (cooling_down_accumulate_cnt >= (TEMP_OF_WATER_ACCUMULATE_TIEM_MS / ONE_CYCLE_TIME_MS))
                  {
                      // å¦‚æœè§£é™¤æ°´æ¸©æŠ¥è­¦çš„è®¡æ•°å¤§äº (æ°´æ¸©æ£€æµ‹çš„ç´¯è®¡æ—¶é—´ / ä¸€è½®ä¸»å¾ªç¯çš„æ—¶é—´
             -)ï¼Œ
                      // å³ï¼Œæ£€æµ‹åˆ°å¯ä»¥è§£é™¤æ°´æ¸©æŠ¥è­¦çš„æ—¶é—´ å¤§äº æ°´æ¸©æ£€æµ‹çš„ç´¯è®¡æ—¶é—´
                      cooling_down_accumulate_cnt = 0; // æ¸…é™¤è®¡æ•°
                      fun_info.flag_is_in_water_temp_warning = 0;
                      flag_set_temp_of_water_warning = 1; // å‘é€è§£é™¤æ°´æ¸©æŠ¥è­¦çš„ä¿¡æ¯
                  }
              
                  // å¦‚æœä¸å¤„äºæ°´æ¸©æŠ¥è­¦
                  if (adc_val >= TEMP_OF_WATER_WARNING_AD_VAL)
                  {
                      over_heat_accumulate_cnt++;
                      // æ¸…é™¤è§£é™¤æ°´æ¸©æŠ¥è­¦çš„è®¡æ•°
                      cooling_down_accumulate_cnt = 0;
                  }
                  else
                  {
                      // æœ‰ä¸€æ¬¡æ²¡æœ‰æ£€æµ‹åˆ°æ°´æ¸©è¿‡çƒ­ï¼Œæ¸…é™¤æ°´æ¸©è¿‡çƒ­è®¡æ•°
                      over_heat_accumulate_cnt = 0;
C51 COMPILER V9.60.7.0   TEMP_OF_WATER                                                     12/05/2025 17:29:01 PAGE 2   

                  }
              
                  if (over_heat_accumulate_cnt >= (TEMP_OF_WATER_ACCUMULATE_TIEM_MS / ONE_CYCLE_TIME_MS))
                  {
                      // å¦‚æœæ°´æ¸©æŠ¥è­¦çš„è®¡æ•°å¤§äº (æ°´æ¸©æ£€æµ‹çš„ç´¯è®¡æ—¶é—´ / ä¸€è½®ä¸»å¾ªç¯çš„æ—¶é—´)ï¼Œ
                      // å³ï¼Œæ£€æµ‹åˆ°æ°´æ¸©æŠ¥è­¦çš„æ—¶é—´ å¤§äº æ°´æ¸©æ£€æµ‹çš„ç´¯è®¡æ—¶é—´
                      over_heat_accumulate_cnt = 0; // æ¸…é™¤è®¡æ•°
                      fun_info.flag_is_in_water_temp_warning = 1;
                      flag_set_temp_of_water_warning = 1; // å‘é€æ°´æ¸©æŠ¥è­¦çš„ä¿¡æ¯
                  }
              
                  if (temp_of_water_update_time_cnt >= TEMP_OF_WATER_UPDATE_TIME_MS)
                  {
                      // å¦‚æœåˆ°äº†å‘é€æ°´æ¸©æŠ¥è­¦/å‘é€è§£é™¤æ°´æ¸©æŠ¥è­¦çš„æ—¶é—´ï¼Œå‘é€ä¸€æ¬¡å½“å‰çš„çŠ¶æ€
                      temp_of_water_update_time_cnt = 0;
                      flag_set_temp_of_water_warning = 1; //
              
                      // P20 = ~P20; // æµ‹è¯•å‘ç°,TEMP_OF_WATER_UPDATE_TIME_MS == 1000æ—¶ï¼Œæ¯2.28så‘é€ä¸€æ¬¡çŠ¶æ€
             -
                  }
              }
              
              #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
